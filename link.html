<!DOCTYPE html>
<html>

<head>
    <title>Location</title>
    <meta name="viewport" content="width=device-width">
    <link href='http://fonts.googleapis.com/css?family=Dosis:400,700' rel='stylesheet' type='text/css'>
    <style type="text/css">
        body {
            background-color: #F5DFAE;
            height: 100%;
            width: 100%;
        }
        div#mapCanvas {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
        }
        div#overlay {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            z-index: 1;
            background-color: rgba(0,0,0,0.5);
        }
        div#overlay h1 {
            text-align: center;
            padding-top: 25%;
            color: white;
            font-family: 'Dosis', sans-serif;
            font-size: 1.5em;
        }
    </style>
    <script src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">

    window.onload = function() {
        var position = {
            lat: {{.Lat}},
            lon: {{.Lon}},
            accuracy: {{.Accuracy}},
            timestamp: {{.Timestamp}}
        };
        initialiseMap(position.lat, position.lon);
    }

    function initialiseMap(lat, lon) {
        var mapDiv = document.getElementById('mapCanvas');
        var centerPosition = new google.maps.LatLng(lat, lon);
        var opt = {
            zoom: 15,
            center: centerPosition,
            mapTypeId: 'terrain'
        };
        var map = new google.maps.Map(mapDiv, opt);
        var marker = new google.maps.Marker({
            position: centerPosition,
            map: map
        });
        google.maps.event.addListenerOnce(map, 'tilesloaded', function(){
            document.getElementById('overlay').style.display = 'none';
        });
    }

    </script>
</head>

<body>
    <div id="overlay">
        <h1>loading ...</h1>
    </div>
    <div id="mapCanvas"></div>
</body>

</html>